# 系统要求

<cite>
**本文档中引用的文件**  
- [config.py](file://config.py)
- [requirements.txt](file://requirements.txt)
- [start_playwright.bat](file://start_playwright.bat)
- [start_playwright.sh](file://start_playwright.sh)
- [check_ffmpeg.py](file://check_ffmpeg.py)
- [bilibili_cover_crawler_playwright.py](file://bilibili_cover_crawler_playwright.py)
</cite>

## 目录
1. [Python版本要求](#python版本要求)  
2. [依赖包安装方法](#依赖包安装方法)  
3. [关键依赖及其作用](#关键依赖及其作用)  
4. [FFmpeg安装与配置](#ffmpeg安装与配置)  
5. [操作系统兼容性](#操作系统兼容性)  
6. [网络与存储建议](#网络与存储建议)  
7. [反爬策略与使用规范](#反爬策略与使用规范)

## Python版本要求
本项目要求使用 **Python 3.8 或更高版本**。项目启动脚本中使用了 `python10` 命令，表明推荐使用 Python 3.10 或以上版本以确保兼容性和性能优化。

**Section sources**  
- [start_playwright.bat](file://start_playwright.bat#L3-L5)
- [start_playwright.sh](file://start_playwright.sh#L5-L7)

## 依赖包安装方法
项目依赖通过 `requirements.txt` 文件管理。安装方法如下：

```bash
pip install -r requirements.txt
```

在 Windows 和 Linux/macOS 系统中，启动脚本会自动检测依赖并执行安装。若依赖缺失，脚本将自动调用 `pip install -r requirements.txt` 完成安装。

**Section sources**  
- [start_playwright.bat](file://start_playwright.bat#L15-L21)
- [start_playwright.sh](file://start_playwright.sh#L15-L21)
- [requirements.txt](file://requirements.txt#L1-L25)

## 关键依赖及其作用
| 依赖库 | 作用说明 |
|--------|----------|
| **Playwright** | 用于自动化控制浏览器，模拟真实用户行为访问哔哩哔哩页面，有效规避反爬机制，支持滚动加载、分页点击等复杂操作。 |
| **aiohttp** | 提供异步HTTP请求能力，用于高效下载视频分段和封面图片，提升批量下载性能。 |
| **requests** | 用于同步HTTP请求，获取API数据或备用页面抓取，适用于轻量级请求场景。 |
| **tqdm** | 在命令行中显示进度条，实时反馈封面和视频的下载进度，提升用户体验。 |

**Section sources**  
- [requirements.txt](file://requirements.txt#L1-L25)
- [bilibili_cover_crawler_playwright.py](file://bilibili_cover_crawler_playwright.py#L1-L2313)

## FFmpeg安装与配置
**FFmpeg 是视频合并功能的必要组件**，必须单独安装并正确配置，否则视频下载功能将无法使用。

### 安装方式
- **Windows**：  
  - 推荐使用包管理器：`choco install ffmpeg`、`scoop install ffmpeg` 或 `winget install ffmpeg`  
  - 手动安装：从 [FFmpeg官网](https://ffmpeg.org/download.html) 下载，解压后将 `bin` 目录添加至系统 `PATH` 环境变量。

- **Linux**：  
  ```bash
  sudo apt install ffmpeg        # Ubuntu/Debian
  sudo yum install ffmpeg        # CentOS/RHEL
  sudo pacman -S ffmpeg          # Arch Linux
  ```

- **macOS**：  
  ```bash
  brew install ffmpeg            # Homebrew
  ```

### 配置方式
可在 `config.py` 中设置自定义路径：
```python
FFMPEG_CONFIG = {
    'custom_path': '/path/to/your/ffmpeg',  # 替换为实际路径
    'enabled': True
}
```

若未设置，程序将自动搜索常见安装路径。可通过运行 `python check_ffmpeg.py` 验证安装状态。

**Section sources**  
- [config.py](file://config.py#L300-L399)
- [check_ffmpeg.py](file://check_ffmpeg.py#L1-L177)
- [bilibili_cover_crawler_playwright.py](file://bilibili_cover_crawler_playwright.py#L1-L2313)

## 操作系统兼容性
本项目支持以下操作系统：

| 操作系统 | 启动脚本 | 说明 |
|----------|----------|------|
| **Windows** | `start_playwright.bat` | 支持所有现代Windows版本，需确保Python和FFmpeg已加入PATH。 |
| **Linux** | `start_playwright.sh` | 支持主流发行版，建议使用systemd或终端运行。 |
| **macOS** | `start_playwright.sh` | 支持Intel和Apple Silicon芯片，推荐使用Homebrew安装依赖。 |

启动脚本会自动检测系统环境并执行相应操作。

**Section sources**  
- [start_playwright.bat](file://start_playwright.bat#L1-L51)
- [start_playwright.sh](file://start_playwright.sh#L1-L42)

## 网络与存储建议
为确保高清视频顺利下载，建议满足以下条件：

- **网络带宽**：建议最低 **10 Mbps** 以上，以支持4K视频流的稳定下载。
- **存储空间**：单个4K视频可能超过1GB，建议预留 **至少50GB** 可用空间用于批量下载。
- **磁盘类型**：推荐使用SSD以提升I/O性能，减少合并和写入延迟。

**Section sources**  
- [check_ffmpeg.py](file://check_ffmpeg.py#L130-L135)

## 反爬策略与使用规范
为避免账号受限或IP封禁，请遵守以下使用规范：

- **合理设置爬取频率**：程序已内置智能延迟机制（2-8秒），请勿修改为过短间隔。
- **遵守网站使用条款**：不得用于大规模商业爬取或侵犯UP主版权内容。
- **尊重反爬政策**：如遇“请求过于频繁”提示，应立即停止并等待冷却。
- **使用真实User-Agent**：程序已配置多种主流浏览器标识，模拟真实访问行为。
- **避免并发过载**：建议单实例运行，避免多进程同时请求同一用户。

**Section sources**  
- [config.py](file://config.py#L100-L150)
- [bilibili_cover_crawler_playwright.py](file://bilibili_cover_crawler_playwright.py#L1-L2313)